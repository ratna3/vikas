================================================================
  üö® CORS ERROR FIX - SUPABASE CONFIGURATION
================================================================

PROBLEM IDENTIFIED:
-------------------
Your Netlify site (https://myrightwindow.netlify.app) is being blocked
by Supabase CORS policy. This prevents your site from connecting to
Supabase services (Auth, Database, Realtime).

ERROR: "No 'Access-Control-Allow-Origin' header is present"

This is NOT a code issue - it's a Supabase configuration issue!

================================================================
  üîß FIX - ADD YOUR DOMAIN TO SUPABASE (3 MINUTES)
================================================================

STEP 1: GO TO SUPABASE DASHBOARD
---------------------------------
1. Open: https://supabase.com/dashboard/project/tvwfrxndpxxdrtlaemak
2. Login to your Supabase account

STEP 2: GO TO API SETTINGS
---------------------------
1. Click "Settings" in the left sidebar (gear icon at bottom)
2. Click "API" section
3. Scroll down to find "API Settings" or "Configuration"

STEP 3: ADD YOUR NETLIFY DOMAIN
--------------------------------
Look for one of these sections:

OPTION A: "Site URL" or "Additional Redirect URLs"
--------------------------------------------------
1. Find field labeled "Site URL" or "Redirect URLs"
2. Add your Netlify URL: https://myrightwindow.netlify.app
3. Click "Save"

OPTION B: "CORS Allowed Origins" (Might be in Authentication settings)
-----------------------------------------------------------------------
1. Go to: Authentication ‚Üí URL Configuration
2. Find "Site URL" field
3. Set to: https://myrightwindow.netlify.app
4. Find "Redirect URLs" section
5. Add these URLs:
   - https://myrightwindow.netlify.app
   - https://myrightwindow.netlify.app/**
   - http://localhost:5173 (for local dev)
6. Click "Save"

STEP 4: WAIT 2-3 MINUTES
-------------------------
After saving, wait 2-3 minutes for changes to propagate through
Supabase's infrastructure.

STEP 5: TEST YOUR SITE
-----------------------
1. Clear browser cache (Ctrl+Shift+Delete)
2. Open https://myrightwindow.netlify.app in new incognito window
3. Try logging in again
4. Should work now!

================================================================
  üìç WHERE TO FIND THE SETTINGS
================================================================

METHOD 1: Authentication ‚Üí URL Configuration
---------------------------------------------
Dashboard ‚Üí Project tvwfrxndpxxdrtlaemak ‚Üí Authentication ‚Üí URL Configuration

Look for:
- Site URL: https://myrightwindow.netlify.app
- Redirect URLs: Add your Netlify URL

METHOD 2: API Settings
----------------------
Dashboard ‚Üí Settings ‚Üí API

Look for:
- API URL (should be https://tvwfrxndpxxdrtlaemak.supabase.co)
- Anon key (already have this)
- Service role key (don't share this!)

METHOD 3: Project Settings ‚Üí General
-------------------------------------
Settings ‚Üí General ‚Üí Reference ID section

Check "Host" configuration

================================================================
  ‚úÖ WHAT TO ADD TO SUPABASE
================================================================

PRIMARY SITE URL:
https://myrightwindow.netlify.app

REDIRECT URLs (Add all of these):
https://myrightwindow.netlify.app
https://myrightwindow.netlify.app/**
https://myrightwindow.netlify.app/admin/login
https://myrightwindow.netlify.app/admin/dashboard
http://localhost:5173
http://localhost:5173/**

ALLOWED ORIGINS:
https://myrightwindow.netlify.app
http://localhost:5173

================================================================
  üîç VISUAL GUIDE - WHERE TO CLICK
================================================================

1. Supabase Dashboard
   ‚îî‚îÄ‚îÄ Left Sidebar: "Authentication" icon
       ‚îî‚îÄ‚îÄ Click: "URL Configuration"
           ‚îú‚îÄ‚îÄ Site URL: [Enter your Netlify URL]
           ‚îî‚îÄ‚îÄ Redirect URLs: [Add your Netlify URL]
               ‚îî‚îÄ‚îÄ Click "Add URL" for each
               ‚îî‚îÄ‚îÄ Click "Save" at bottom

OR

2. Supabase Dashboard
   ‚îî‚îÄ‚îÄ Left Sidebar: "Settings" (gear icon)
       ‚îî‚îÄ‚îÄ Click: "API"
           ‚îî‚îÄ‚îÄ Look for CORS or URL configuration
               ‚îî‚îÄ‚îÄ Add your Netlify domain

================================================================
  üêõ TROUBLESHOOTING
================================================================

PROBLEM: Can't find "Site URL" or "Redirect URLs" settings
SOLUTION:
‚Üí Try: Authentication ‚Üí URL Configuration
‚Üí Try: Settings ‚Üí API
‚Üí Try: Settings ‚Üí General
‚Üí Search for "CORS" or "URL" in settings

PROBLEM: Added URL but still getting CORS error
SOLUTION:
‚Üí Wait 2-3 minutes for propagation
‚Üí Clear browser cache completely
‚Üí Try in incognito/private window
‚Üí Check you saved the settings (blue "Save" button)
‚Üí Verify URL is exactly: https://myrightwindow.netlify.app (no trailing slash)

PROBLEM: Multiple site URLs or confused which to use
SOLUTION:
‚Üí Site URL = Your primary domain
‚Üí Redirect URLs = All domains that can connect (add both Netlify and localhost)
‚Üí Can have multiple redirect URLs, but only one site URL

PROBLEM: Still not working after configuration
SOLUTION:
‚Üí Check Supabase project is on paid plan (free plan might have limits)
‚Üí Verify anon key is correct in Netlify environment variables
‚Üí Check Supabase project is active (not paused)
‚Üí Try restarting Supabase project (Settings ‚Üí General ‚Üí Restart)

================================================================
  ‚ö° QUICK FIX CHECKLIST
================================================================

[ ] Go to Supabase Dashboard
[ ] Navigate to Authentication ‚Üí URL Configuration
[ ] Set Site URL to: https://myrightwindow.netlify.app
[ ] Add to Redirect URLs:
    [ ] https://myrightwindow.netlify.app
    [ ] https://myrightwindow.netlify.app/**
    [ ] http://localhost:5173
[ ] Click "Save"
[ ] Wait 2-3 minutes
[ ] Clear browser cache
[ ] Test site in incognito window
[ ] Try login again

================================================================
  üìä VERIFICATION
================================================================

After adding the domain, verify:

1. In Supabase Dashboard:
   ‚úì Site URL shows your Netlify domain
   ‚úì Redirect URLs include your Netlify domain
   ‚úì Settings saved successfully

2. In Browser:
   ‚úì No CORS errors in console (F12)
   ‚úì Can fetch from Supabase API
   ‚úì Login works
   ‚úì Blog posts load

3. Test these URLs work:
   ‚úì https://myrightwindow.netlify.app
   ‚úì https://myrightwindow.netlify.app/blogs
   ‚úì https://myrightwindow.netlify.app/admin/login

================================================================
  üéØ ALTERNATIVE: USE SUPABASE CLI (Advanced)
================================================================

If you have Supabase CLI installed, you can set this via command:

npx supabase projects api-config --project-ref tvwfrxndpxxdrtlaemak update \
  --site-url https://myrightwindow.netlify.app

Or update the config file: supabase/config.toml

But the Dashboard method is easier and more reliable.

================================================================
  üìû NEED HELP?
================================================================

If you can't find the settings:

1. Supabase Documentation:
   https://supabase.com/docs/guides/auth/redirect-urls

2. Supabase Support:
   https://supabase.com/dashboard/support

3. Common Location (99% of cases):
   Dashboard ‚Üí Authentication ‚Üí URL Configuration

================================================================
  ‚úÖ AFTER FIX - WHAT TO EXPECT
================================================================

Once configured correctly, you should see:

‚úÖ No CORS errors in browser console
‚úÖ Login page loads without errors
‚úÖ Can authenticate successfully
‚úÖ Blog posts load from Supabase
‚úÖ Admin dashboard accessible
‚úÖ Realtime connections work

Current Status: ‚ùå CORS blocking your domain
After Fix:      ‚úÖ Full Supabase access

================================================================

SUMMARY:
--------
1. Go to Supabase Dashboard
2. Authentication ‚Üí URL Configuration
3. Add: https://myrightwindow.netlify.app
4. Save and wait 2-3 minutes
5. Test in incognito window

This will fix all CORS errors immediately!

================================================================
